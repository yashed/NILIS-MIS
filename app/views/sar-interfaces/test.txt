<head>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
</head>

string(335) ""Name of  Programme  : 2"
"Subject  : Information System Sercurity"

"Index No","Registration No","Examiner 01 Mark","Examiner 02 Marks","Assignment Marks"
DILIM/003,DILIM/2022/003 , 34 , , ,
DILIM/005,DILIM/2022/005 ,44 , , ,
DILIM/007,DILIM/2022/007 , 45 , , ,
DILIM/009,DILIM/2022/009 , 43 , , ,
DILIM/011,DILIM/2022/011 , 43 , , ,
"
<br />
<b>Warning</b>:  Undefined array key 2 in <b>/Applications/XAMPP/xamppfiles/htdocs/NILIS-MIS/app/models/ResultSheet.model.php</b> on line <b>41</b><br />
array(7) {
  ["formId"]=>
  string(7) "form5_2"
  ["subjectCode"]=>
  string(3) "ISS"
  ["date"]=>
  string(19) "2024-01-12 05:15:34"
  ["uploadName"]=>
  string(10) "ISS_E1.csv"
  ["newName"]=>
  string(26) "form5_2_165a0bce617709.csv"
  ["type"]=>
  string(9) "examiner1"
  ["examId"]=>
  int(43)
}
<pre>insert into mark_sheets(formId,subjectCode,date,uploadName,newName,type,examId) values (:formId,:subjectCode,:date,:uploadName,:newName,:type,:examId)</pre><pre>Upload examiner1 Marksheet for ISS in ExamId = 43 successfully.</pre>string(87) "inside the functionform5_2_165a0bce617709.csvexam id 43subject code ISStype = examiner1"
string(17) "subject values = "
array(6) {
  [0]=>
  string(9) "DILIM/003"
  [1]=>
  string(15) "DILIM/2022/003 "
  [2]=>
  string(4) " 34 "
  [3]=>
  string(4) " 23 "
  [4]=>
  string(3) " 34"
  [5]=>
  string(1) " "
}
string(17) "subject values = "
array(6) {
  [0]=>
  string(9) "DILIM/005"
  [1]=>
  string(15) "DILIM/2022/005 "
  [2]=>
  string(3) "44 "
  [3]=>
  string(4) " 43 "
  [4]=>
  string(3) " 44"
  [5]=>
  string(0) ""
}
string(17) "subject values = "
array(6) {
  [0]=>
  string(9) "DILIM/007"
  [1]=>
  string(15) "DILIM/2022/007 "
  [2]=>
  string(4) " 45 "
  [3]=>
  string(3) "54 "
  [4]=>
  string(3) " 56"
  [5]=>
  string(0) ""
}
string(17) "subject values = "
array(6) {
  [0]=>
  string(9) "DILIM/009"
  [1]=>
  string(15) "DILIM/2022/009 "
  [2]=>
  string(4) " 43 "
  [3]=>
  string(3) "34 "
  [4]=>
  string(3) " 66"
  [5]=>
  string(0) ""
}
string(17) "subject values = "
array(6) {
  [0]=>
  string(9) "DILIM/011"
  [1]=>
  string(15) "DILIM/2022/011 "
  [2]=>
  string(4) " 43 "
  [3]=>
  string(3) "22 "
  [4]=>
  string(3) " 34"
  [5]=>
  string(0) ""
}
<br />
<b>Warning</b>:  Undefined array key 1 in <b>/Applications/XAMPP/xamppfiles/htdocs/NILIS-MIS/app/core/functions.php</b> on line <b>94</b><br />
<br />
<b>Warning</b>:  Undefined array key 2 in <b>/Applications/XAMPP/xamppfiles/htdocs/NILIS-MIS/app/core/functions.php</b> on line <b>95</b><br />
<br />
<b>Warning</b>:  Undefined array key 3 in <b>/Applications/XAMPP/xamppfiles/htdocs/NILIS-MIS/app/core/functions.php</b> on line <b>97</b><br />
<br />
<b>Warning</b>:  Undefined array key 4 in <b>/Applications/XAMPP/xamppfiles/htdocs/NILIS-MIS/app/core/functions.php</b> on line <b>98</b><br />
string(17) "subject values = "
array(4) {
  [0]=>
  string(0) ""
  [1]=>
  string(0) ""
  [2]=>
  NULL
  [3]=>
  string(0) ""
}
{"success":true,"message":"File uploaded successfully."}{"success":false,"message":"Error moving the uploaded file."}
 <!DOCTYPE html>
    <html lang="en">
        <head>
            <link rel="stylesheet" type="text/css" href="http://localhost/NILIS-MIS/public/css/sidebar-component.css">
            <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
            <title>Navsidebar</title>
        </head>
        <body>
            <nav class="sidebar close">
                <header>
                    <div class="image-text">
                        <span class="image">
                            <img src="http://localhost/NILIS-MIS/public/assets/NILIS-logo.png" alt="logo">
                        </span>
                        <div class="text header-text">
                            <h4 class="name1">National Institute of</h4>
                            <h5 class="name2">Library and Information Sciences</h5>
                            <span class="profession">University of Colombo</span>
                        </div>
                    </div>
                    <i class='bx bx-chevron-right toggle'></i>
                </header>

    <div class="menu-bar">
        <hr>
        <div class="menu">
            <ul class="menu-links">
                <h6 class="topic1">MAIN</h6>
                <li class="nav-link">
                    <a href="http://localhost/NILIS-MIS/public/sar">
                        <i class="bx bx-home icon"></i>
                        <span class="text nav-text">Dashboard</span>
                    </a>
                </li>
                <li class="nav-link">
                    <a href="http://localhost/NILIS-MIS/public/sar/notification">
                        <i class="bx bx-bell icon"></i>
                        <span class="text nav-text">Notification</span>
                    </a>
                </li>
                <li class="nav-link">
                    <a href="http://localhost/NILIS-MIS/public/sar/degreeprograms">
                        <i class="bx bx-home icon"></i>
                        <span class="text nav-text">Degree Programs</span>
                    </a>
                </li>
                <hr class="horizontal-line">
                <h6 class="topic2">SETTINGS</h6>
                <li class="nav-link">
                    <a href="http://localhost/NILIS-MIS/public/sar/settings">
                        <i class="bx bx-cog icon"></i>
                        <span class="text nav-text">Settings</span>
                    </a>
                </li>
            </ul>
        </div>
    </div>
    </nav>

    <div class="hero">
        <nav>
            <ul class="hero-ul">
                <li class="hero-ul-li"><i class="bx bxs-bell icon"></i></li>
                <li class="hero-ul-li"><img src="http://localhost/NILIS-MIS/public/components/navside-bar/MyOriginalPhoto.jpg" class="user-pic" onclick="toggleMenu()"></li>
            </ul>

            <div class="sub-menu-wrap" id="subMenu">
                <div class="sub-menu">
                    <div class="user-info">
                        <img src="http://localhost/NILIS-MIS/public/components/navside-bar/MyOriginalPhoto.jpg">
                        <h3>Bimsara Anjana</h3>
                    </div>
                    <hr>
                    <a href="http://localhost/NILIS-MIS/public/login" class="sub-menu-link">
                        <i class="bx bx-log-out icon"></i>
                        <p>Logout</p>
                        <span>></span>
                    </a>
                </div>
            </div>
        </nav>
    </div>




<script>
const body = document.querySelector("body");
const sidebar = body.querySelector(".sidebar");
const toggle = body.querySelector(".toggle");

toggle.addEventListener("click", () => {
    sidebar.classList.toggle("close");
});

const userPic = body.querySelector(".user-pic");
const subMenuWrap = document.querySelector(".sub-menu-wrap");

userPic.addEventListener("click", () => {
    subMenuWrap.style.display = subMenuWrap.style.display === "block" ? "none" : "block";
});

subMenuWrap.addEventListener("click", (event) => {
    if (event.target === subMenuWrap) {
        subMenuWrap.style.display = "none";
    }
});

// drop menu side

// let arrows = document.querySelectorAll(".arrow");
// for (var i = 0; i < arrows.length; i++) {
//     arrows[i].addEventListener("click", (e) => {
//         console.log("Arrow clicked");
//         let arrowParent = e.target.parentElement.parentElement;
//         arrowParent.classList.toggle("show");
//     });
// }
const arrows = document.querySelectorAll(".arrow");

for (let i = 0; i < arrows.length; i++) {
    arrows[i].addEventListener("click", (e) => {
        console.log("Arrow clicked");
        let arrowParent = e.target.parentElement.parentElement;
        arrowParent.classList.toggle("show");
    });
}

const coursesLink = document.querySelector(".nav-link");

coursesLink.addEventListener("click", (e) => {
    e.preventDefault();
    const submenu = coursesLink.querySelector(".sub-menu-drop");
    submenu.style.display = submenu.style.display === "block" ? "none" : "block";
});

document.addEventListener("click", (event) => {
    const coursesLink = document.querySelector(".nav-link");
    const submenu = coursesLink.querySelector(".sub-menu-drop");

    if (event.target !== coursesLink && event.target.parentNode !== coursesLink) {
        submenu.style.display = "none";
    }
});
</script>


</body>

</html>

<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Result Upload</title>
</head>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap');

    * {
        font-family: 'Poppins', sans-serif;
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    :root {
        --body-color: #E2E2E2;
        --sidebar-color: #17376E;
        --primary-color: #9AD6FF;
        --text-color: #ffffff;
        --tran-02: all 0.2s ease;
        --tran-03: all 0.3s ease;
        --tran-04: all 0.4s ease;
        --tran-05: all 0.5s ease;
    }

    body {
        min-height: 100vh;
        display: flex;
        flex-direction: column;
    }

    .temp2-home {
        height: 100vh;
        left: 250px;
        position: relative;
        width: calc(100% - 250px);
        transition: var(--tran-05);
        background: var(--body-color);
    }

    .temp2-title {
        font-size: 30px;
        font-weight: 600;
        color: black;
        padding: 10px 0px 10px 32px;
        background-color: var(--text-color);
        border-radius: 6px;
        margin: 7px 4px 7px 4px;
    }

    .sidebar.close~.temp2-home {
        left: 88px;
        width: calc(100% - 88px);
    }

    .temp2-subcard-data {
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
    }

    .temp2-subcard-data-value {
        font-size: 38px;
        font-weight: 600;
        color: #17376E;
    }

    .temp2-subcard-data-title {
        font-size: 18px;
        font-weight: 600;
        color: #17376E;
    }

    .temp2-subsection-1 {
        background-color: #ffffff;
        border-radius: 6px;
        height: 18vw;
        padding: 1vw 2vw 1vw 2vw;
        margin-left: 4px;
        padding-top: 1vw;
    }

    .temp2-sub-title1 {

        color: #17376E;
        font-family: Poppins;
        font-size: 22px;
        font-style: normal;
        font-weight: 600;
        font-size: 1.8vw;

    }

    .temp2-sub-title2 {

        color: #17376E;
        font-family: Poppins;
        font-style: normal;
        font-weight: 600;
        font-size: 1.8vw;
    }

    .temp2-subsection-2 {
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        margin-top: 10px;

        /* padding: 10px 10px 30px 35px; */
        /* border-radius: 6px; */
        /* margin: 7px 4px 7px 4px; */
    }

    .temp2-subsection-21 {
        display: flex;
        flex-direction: column;
        background-color: var(--text-color);
        padding: 1% 1% 1% 1%;
        border-radius: 6px;
        width: 100%;
        height: auto;
        padding: 1vw 2vw 1vw 2vw;
    }

    .temp2-footer {
        margin-top: auto;
    }

    .dashed-container1 {
        border: 2px dashed #333;
        border-radius: 8px;
        padding: 10px;
        width: 18%;
        height: 270px;
        margin-top: 3%;

        display: flex;
        flex: 25%;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }

    .dashed-container2 {
        border: 2px dashed #333;
        border-radius: 8px;
        padding: 10px;
        width: 18%;
        height: 270px;
        margin-top: 3%;

        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        flex: 25%;
    }

    .dashed-container3 {
        border: 2px dashed #333;
        border-radius: 8px;
        padding: 10px;
        width: 18%;
        height: 270px;
        margin-top: 3%;

        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        flex: 25%;
    }

    .dashed-container4 {
        border: 2px dashed #333;
        border-radius: 8px;
        padding: 10px;
        width: 18%;
        height: 270px;
        margin-top: 3%;

        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        flex: 25%;
    }

    input[type="file"] {
        margin: 10px 0;
        /* margin-left: 150px; */
    }

    .file-input-icon {
        display: flex;
        width: 40px;
        height: 40px;
        cursor: pointer;

    }

    .file-input-icon:hover {
        color: #9AD6FF;
        width: 45px;
        height: 45px;

    }

    input[type="file"] {
        display: none;
    }

    .text1 {
        font-size: 0.9vw;
        font-weight: 300;
    }

    .browse-label {
        color: #9AD6FF;
        cursor: pointer;
    }

    .browse-label:hover {
        color: #17376E;
        font-weight: 600;

    }

    .flex-container {
        gap: 5%;
        display: flex;
        flex-direction: row;
        ustify-content: space-between;
    }

    .flex-container-top {

        display: flex;
        justify-content: space-between;
        flex-direction: row;
    }

    .download-button {
        padding: 1% 1% 1% 4%;
        background-color: #17376E;
        color: #fff;
        text-decoration: none;
        align-items: center;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        width: 18vw;
        font-size: 0.8vw;
    }

    .sub-name {
        font-weight: 600;
        padding-left: 2%;
        font-size: 20px;
    }

    .subject {
        padding-top: 5%;
    }

    .row {
        display: flex;
        font-family: "Poppins", sans-serif;
    }



    .column1 {
        flex: 50%;
        /* background-color: #9AD6FF; */
        padding: 2%;
        height: 15vw;
        padding-left: 10vw;
    }

    .column2 {
        flex: 50%;
        /* background-color: #E2E2E2; */
        padding: 2%;
        height: 15vw;
        padding-left: 10vw;
    }

    .data1 {
        font-family: "Poppins", sans-serif;
        font-size: 1vw;
        padding-left: 10%;
        color: #17376E;
        font-weight: 500;
    }

    .data2 {
        font-family: "Poppins", sans-serif;
        font-size: 1vw;
        padding-left: 10%;
        color: #17376E;
        padding-top: 20px;
        font-weight: 500;
    }

    .data3 {
        font-family: "Poppins", sans-serif;
        font-size: 1vw;
        padding-left: 10%;
        color: #17376E;
        font-weight: 500;
    }

    .data4 {
        font-family: "Poppins", sans-serif;
        font-size: 1vw;
        padding-left: 10%;
        color: #17376E;
        padding-top: 20px;
        font-weight: 500;
    }

    #course,
    #exam,
    #count,
    #year {
        padding-top: 5px;
        font-size: 0.9vw;
        color: #000000;
        font-weight: 300;
    }


    .input-main-group {
        display: flex;
        align-items: center;
        margin-left: 25%;
        background-color: #ffffff;
        gap: 1%;
    }

    .custom-dropdown {
        position: relative;
        width: 45%;
        margin: 10px;
        border: #E2E2E2;
    }

    .custom-dropdown .icon {
        position: absolute;
        top: 50%;
        left: 10px;
        transform: translateY(-50%);
        font-size: 25px;
        color: #000;
        /* Set the color you prefer */
    }

    .custom-dropdown select {
        width: calc(100% - 40px);
        /* Adjusted width to leave space for the icon */
        padding: 10px;
        border: 1px solid #E2E2E2;
        border-radius: 5px;
        background-color: #E2E2E2;
        text-align: center;
        cursor: pointer;
        font-size: 16px;
        padding-left: 40px;
        /* Adjust this value to leave space for the icon */
    }

    .custom-dropdown select:hover {
        background-color: #eeeeee;
        /* Change the background color on hover */
    }

    .dr-degree-programs-button {
        height: 70%;
        border-radius: 7px;
        background-color: var(--sidebar-color);
        color: var(--text-color);
        width: 10%;
        min-width: 80px;
        font-size: 1vw;
    }

    .dr-degree-programs-button:hover {
        background-color: var(--text-color);
        color: var(--sidebar-color);
    }

    .btn-primary {
        min-width: 25vh;
        color: #fff;
        height: 5vh;
        padding: 5px 5px 5px 5px;
        border-radius: 12px;
        background: #17376e;
        box-shadow: 0px 3px 6px 0px rgba(0, 0, 0, 0.2);
        border: 0px;
        margin-bottom: 10px;
        /* margin-top: 25px; */
    }

    .bt-name {
        font-size: 16px;
        font-weight: 500px;
    }

    .btn-primary:hover {
        color: #17376e;
        background-color: white;
        border: 1px solid
    }

    .btn-secondary {
        min-width: 50%;
        color: #17376e;
        background: white;
        height: 4vh;
        padding: 5px 5px 5px 5px;
        border-radius: 8px;
        box-shadow: 0px 3px 6px 0px rgba(0, 0, 0, 0.2);
        border: 1px solid;
        margin-bottom: 10px;
    }

    .btn-secondary:hover {
        color: black;
        background-color: #ACCBFF;
        border: 1px solid #17376e;
    }

    .file-info-container {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        flex-direction: column;
        padding: 10px;
    }

    .uploaded-file-name {
        text-align: center;

    }

    .file-uploded-icon {
        width: 60px;
        height: 60px;
        background-image: url('http://localhost/NILIS-MIS/public//assets/result-upload/csv-upload.svg');
        background-size: cover;
        background-repeat: no-repeat;
        cursor: pointer;
    }

    .btn-secondary-cancel {
        min-width: 50%;
        color: #ff0000;
        background: white;
        height: 4vh;
        padding: 5px 5px 5px 5px;
        border-radius: 8px;
        box-shadow: 0px 3px 6px 0px rgba(0, 0, 0, 0.2);
        border: 1px solid;
        margin-bottom: 10px;
    }

    .btn-secondary-cancel:hover {
        color: #ff0000;
        background-color: #F9D2D2;
        border: 1px solid red;
    }

    .button-container {
        display: flex;
        justify-content: center;
        gap: 1vw;

    }

    .csv-input-from {
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .dashed-container {

        border-radius: 8px;
        padding: 10px;
        width: 18%;
        height: 270px;
        margin-top: 3%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        flex: 25%;
        border: 2px dashed #3498db;
        cursor: pointer;
        gap: 30px;
    }

    .dashed-container.drag-over {
        border-color: #e74c3c;
        /* Change border color when dragging over */
        background-color: #f2f2f2;
        /* Change background color when dragging over */
        color: #e74c3c;
    }

    .user-error {
        color: red;
        font-size: 10px;
        font-weight: 400;
        margin-left: 5px;
    }

    .marks-type {
        font-size: 1.5vw;
        text-align: center;
        color: #939393;
    }

    .button-bar {
        display: flex;
        gap: 20px;

    }

    .btn-secondary-2 {
        min-width: 25vh;
        color: #fff;
        height: 5vh;
        padding: 5px 15px 5px 15px;
        border-radius: 12px;
        background: #ffffff;
        box-shadow: 0px 3px 6px 0px rgba(0, 0, 0, 0.2);
        color: #17376e;
        border: 0px;
        margin-bottom: 10px;
        border: 1px solid #17376e;
    }

    .btn-secondary-2:hover {
        color: black;
        background-color: #E2E2E2;
        border: 1px solid #17376e;
    }

    .dashed-container-3 {

        border-radius: 8px;
        padding: 10px;
        width: 18%;
        height: 270px;
        margin-top: 3%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        flex: 25%;
        border: 2px dashed #3498db;
        cursor: pointer;
        gap: 30px;
    }

    .dashed-container-3[data-active="true"] {
        display: flex;
    }

    .dashed-container-3[data-active="false"] {
        display: none;
    }

    .dashed-container-3.drag-over {
        border-color: #e74c3c;
        /* Change border color when dragging over */
        background-color: #f2f2f2;
        /* Change background color when dragging over */
        color: #e74c3c;
    }
</style>

<body>

    <div class="temp2-home">
        <div class="temp2-title">Examination</div>
        <div class="temp2-subsection-1">
            <div class="temp2-sub-title1">
                Overview
            </div>

            <div class="row">
                <div class="column1">
                    <div class="data1">Course Name<br>
                        <!-- <div class="email"><br />
<b>Warning</b>:  Undefined variable $student in <b>/Applications/XAMPP/xamppfiles/htdocs/NILIS-MIS/app/views/sar-interfaces/sar-examresultupload.php</b> on line <b>615</b><br />
<br />
<b>Warning</b>:  Attempt to read property "Email" on null in <b>/Applications/XAMPP/xamppfiles/htdocs/NILIS-MIS/app/views/sar-interfaces/sar-examresultupload.php</b> on line <b>615</b><br />
</div> -->
                        <div class="course" id="course">Diploma in School Librarianship</div>
                    </div>
                    <br>
                    <div class="data2">Examination:<br>
                        <!-- <div class="regNum"> <br />
<b>Warning</b>:  Undefined variable $student in <b>/Applications/XAMPP/xamppfiles/htdocs/NILIS-MIS/app/views/sar-interfaces/sar-examresultupload.php</b> on line <b>620</b><br />
<br />
<b>Warning</b>:  Attempt to read property "regNo" on null in <b>/Applications/XAMPP/xamppfiles/htdocs/NILIS-MIS/app/views/sar-interfaces/sar-examresultupload.php</b> on line <b>620</b><br />
</div> -->
                        <div class="exam" id="exam">2nd Semester Examination</div>
                    </div>
                </div>

                <div class="column2">
                    <div class="data3">Participation<br>
                        <div class="count" id="count"> 216</div>
                    </div>
                    <br>
                    <div class="data4">Academic Year:<br>
                        <div class="year" id="year"> 2023/2024</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="temp2-subsection-2">
            <div class="temp2-subsection-21">
                <div class="temp2-sub-title2">
                    Results Submission </br>
                </div>
                                    
                    <div class="subject">
                        <div class="flex-container-top">
                            <div class="sub-name">
                                Information System Sercurity                            </div>
                            <div class="button-bar">
                                <button class="btn-primary" name='download_marksheet'
                                    onclick="downloadFile('ISS')">Download
                                    Marksheet</button>
                                <button class="btn-secondary-2" name='download_marksheet'
                                    onclick="downloadFile('ISS')" hidden>Download
                                    Examiner 03 Marksheet</button>
                            </div>
                        </div>
                        <div class="flex-container">
                            
                            <div class="dashed-container" id="container5_1" ondragover="handleDragOver(event)"
                                ondragenter="handleDragEnter(event)" ondragleave="handleDragLeave(event)"
                                ondrop="handleDrop(event, 'container5_1', 'fileInput5_1' , 'form5_1' , 'ISS','assestment')">
                                <div class='marks-type'>Assestment Marks </div>
                                <form method="POST" class='csv-input-from' enctype="multipart/form-data"
                                    id="form5_1">
                                    <img src='http://localhost/NILIS-MIS/public//assets/file-icon.png' class="file-input-icon"
                                        for="fileInput5_1" onclick="triggerFileInput('fileInput5_1')">
                                    <br>
                                    <input type='text' value='form5_1' name='formID' hidden>
                                    <input type='text' value='assestment' name='type' hidden>
                                    <input type='text' value='ISS' name='subjectCode' hidden>
                                    <input type="file" id="fileInput5_1" name="file" accept=".csv"
                                        onchange="showSubmitButton('container5_1', 'fileInput5_1' , 'form5_1' , 'ISS','assestment')">
                                    <p class="text1">Drag and drop or <label for="fileInput5_1"
                                            class="browse-label">browse</label></br> assignment results.</p>
                                                                    </form>
                            </div>
                            </form>
                            
                            <div class="dashed-container" id="container5_2" ondragover="handleDragOver(event)"
                                ondragenter="handleDragEnter(event)" ondragleave="handleDragLeave(event)"
                                ondrop="handleDrop(event, 'container5_2', 'fileInput5_2' , 'form5_2' , 'ISS', 'examiner1')">
                                <div class='marks-type'>Examiner 01 Marks </div>
                                <form method="POST" class='csv-input-from' enctype="multipart/form-data"
                                    id="form5_2">
                                    <img src='http://localhost/NILIS-MIS/public//assets/file-icon.png' class="file-input-icon"
                                        for="fileInput5_2" onclick="triggerFileInput('fileInput5_2')">
                                    <br>
                                    <input type='text' value='form5_2' name='formID' hidden>
                                    <input type='text' value='examiner1' name='type' hidden>
                                    <input type='text' value='ISS' name='subjectCode' hidden>
                                    <input type="file" id="fileInput5_2" name="file" accept=".csv"
                                        onchange="showSubmitButton('container5_2', 'fileInput5_2' , 'form5_2' , 'ISS', 'examiner1')">
                                    <p class="text1">Drag and drop or <label for="fileInput5_2"
                                            class="browse-label">browse</label></br> Examiner 01 results.</p>
                                </form>
                            </div>
                            
                            <div class="dashed-container" id="container5_3" ondragover="handleDragOver(event)"
                                ondragenter="handleDragEnter(event)" ondragleave="handleDragLeave(event)"
                                ondrop="handleDrop(event, 'container5_3', 'fileInput5_3' , 'form5_3' , 'ISS', 'examiner2')">
                                <div class='marks-type'>Examiner 02 Marks </div>
                                <form method="POST" class='csv-input-from' enctype="multipart/form-data"
                                    id="form5_3">
                                    <img src='http://localhost/NILIS-MIS/public//assets/file-icon.png' class="file-input-icon"
                                        for="fileInput5_3" onclick="triggerFileInput('fileInput5_3')">
                                    <br>
                                    <input type='text' value='form5_3' name='formID' hidden>
                                    <input type='text' value='examiner2' name='type' hidden>
                                    <input type='text' value='ISS' name='subjectCode' hidden>
                                    <input type="file" id="fileInput5_3" name="file" accept=".csv"
                                        onchange="showSubmitButton('container5_3', 'fileInput5_3' , 'form5_3' , 'ISS', 'examiner2')">
                                    <p class="text1">Drag and drop or <label for="fileInput5_3"
                                            class="browse-label">browse</label></br> Examiner 02 results.</p>
                                </form>
                            </div>
                            
                            <div class="dashed-container-3" id="container5_4" ondragover="handleDragOver(event)"
                                ondragenter="handleDragEnter(event)" ondragleave="handleDragLeave(event)"
                                ondrop="handleDrop(event, 'container5_4', 'fileInput5_4' , 'form5_4' , 'ISS','examiner3')">
                                <div class='marks-type'>Examiner 03 Marks </div>
                                <form method="POST" class='csv-input-from' enctype="multipart/form-data"
                                    id="form5_4">
                                    <img src='http://localhost/NILIS-MIS/public//assets/file-icon.png' class="file-input-icon"
                                        for="fileInput5_4" onclick="triggerFileInput('fileInput5_4')">
                                    <br>
                                    <input type='text' value='form5_4' name='formID' hidden>
                                    <input type='text' value='examiner3' name='type' hidden>
                                    <input type='text' value='ISS' name='subjectCode' hidden>
                                    <input type="file" id="fileInput5_4" name="file" accept=".csv"
                                        onchange="showSubmitButton('container5_4', 'fileInput5_4' , 'form5_4' , 'ISS' , 'examiner3')">
                                    <p class="text1">Drag and drop or <label for="fileInput5_4"
                                            class="browse-label">browse</label></br> Examiner 03 results.</p>
                                </form>
                            </div>
                        </div>
                    </div>
                    <br>
                    </form>
                                    
                    <div class="subject">
                        <div class="flex-container-top">
                            <div class="sub-name">
                                LAB2                            </div>
                            <div class="button-bar">
                                <button class="btn-primary" name='download_marksheet'
                                    onclick="downloadFile('LAB2')">Download
                                    Marksheet</button>
                                <button class="btn-secondary-2" name='download_marksheet'
                                    onclick="downloadFile('LAB2')" hidden>Download
                                    Examiner 03 Marksheet</button>
                            </div>
                        </div>
                        <div class="flex-container">
                            
                            <div class="dashed-container" id="container6_1" ondragover="handleDragOver(event)"
                                ondragenter="handleDragEnter(event)" ondragleave="handleDragLeave(event)"
                                ondrop="handleDrop(event, 'container6_1', 'fileInput6_1' , 'form6_1' , 'LAB2','assestment')">
                                <div class='marks-type'>Assestment Marks </div>
                                <form method="POST" class='csv-input-from' enctype="multipart/form-data"
                                    id="form6_1">
                                    <img src='http://localhost/NILIS-MIS/public//assets/file-icon.png' class="file-input-icon"
                                        for="fileInput6_1" onclick="triggerFileInput('fileInput6_1')">
                                    <br>
                                    <input type='text' value='form6_1' name='formID' hidden>
                                    <input type='text' value='assestment' name='type' hidden>
                                    <input type='text' value='LAB2' name='subjectCode' hidden>
                                    <input type="file" id="fileInput6_1" name="file" accept=".csv"
                                        onchange="showSubmitButton('container6_1', 'fileInput6_1' , 'form6_1' , 'LAB2','assestment')">
                                    <p class="text1">Drag and drop or <label for="fileInput6_1"
                                            class="browse-label">browse</label></br> assignment results.</p>
                                                                    </form>
                            </div>
                            </form>
                            
                            <div class="dashed-container" id="container6_2" ondragover="handleDragOver(event)"
                                ondragenter="handleDragEnter(event)" ondragleave="handleDragLeave(event)"
                                ondrop="handleDrop(event, 'container6_2', 'fileInput6_2' , 'form6_2' , 'LAB2', 'examiner1')">
                                <div class='marks-type'>Examiner 01 Marks </div>
                                <form method="POST" class='csv-input-from' enctype="multipart/form-data"
                                    id="form6_2">
                                    <img src='http://localhost/NILIS-MIS/public//assets/file-icon.png' class="file-input-icon"
                                        for="fileInput6_2" onclick="triggerFileInput('fileInput6_2')">
                                    <br>
                                    <input type='text' value='form6_2' name='formID' hidden>
                                    <input type='text' value='examiner1' name='type' hidden>
                                    <input type='text' value='LAB2' name='subjectCode' hidden>
                                    <input type="file" id="fileInput6_2" name="file" accept=".csv"
                                        onchange="showSubmitButton('container6_2', 'fileInput6_2' , 'form6_2' , 'LAB2', 'examiner1')">
                                    <p class="text1">Drag and drop or <label for="fileInput6_2"
                                            class="browse-label">browse</label></br> Examiner 01 results.</p>
                                </form>
                            </div>
                            
                            <div class="dashed-container" id="container6_3" ondragover="handleDragOver(event)"
                                ondragenter="handleDragEnter(event)" ondragleave="handleDragLeave(event)"
                                ondrop="handleDrop(event, 'container6_3', 'fileInput6_3' , 'form6_3' , 'LAB2', 'examiner2')">
                                <div class='marks-type'>Examiner 02 Marks </div>
                                <form method="POST" class='csv-input-from' enctype="multipart/form-data"
                                    id="form6_3">
                                    <img src='http://localhost/NILIS-MIS/public//assets/file-icon.png' class="file-input-icon"
                                        for="fileInput6_3" onclick="triggerFileInput('fileInput6_3')">
                                    <br>
                                    <input type='text' value='form6_3' name='formID' hidden>
                                    <input type='text' value='examiner2' name='type' hidden>
                                    <input type='text' value='LAB2' name='subjectCode' hidden>
                                    <input type="file" id="fileInput6_3" name="file" accept=".csv"
                                        onchange="showSubmitButton('container6_3', 'fileInput6_3' , 'form6_3' , 'LAB2', 'examiner2')">
                                    <p class="text1">Drag and drop or <label for="fileInput6_3"
                                            class="browse-label">browse</label></br> Examiner 02 results.</p>
                                </form>
                            </div>
                            
                            <div class="dashed-container-3" id="container6_4" ondragover="handleDragOver(event)"
                                ondragenter="handleDragEnter(event)" ondragleave="handleDragLeave(event)"
                                ondrop="handleDrop(event, 'container6_4', 'fileInput6_4' , 'form6_4' , 'LAB2','examiner3')">
                                <div class='marks-type'>Examiner 03 Marks </div>
                                <form method="POST" class='csv-input-from' enctype="multipart/form-data"
                                    id="form6_4">
                                    <img src='http://localhost/NILIS-MIS/public//assets/file-icon.png' class="file-input-icon"
                                        for="fileInput6_4" onclick="triggerFileInput('fileInput6_4')">
                                    <br>
                                    <input type='text' value='form6_4' name='formID' hidden>
                                    <input type='text' value='examiner3' name='type' hidden>
                                    <input type='text' value='LAB2' name='subjectCode' hidden>
                                    <input type="file" id="fileInput6_4" name="file" accept=".csv"
                                        onchange="showSubmitButton('container6_4', 'fileInput6_4' , 'form6_4' , 'LAB2' , 'examiner3')">
                                    <p class="text1">Drag and drop or <label for="fileInput6_4"
                                            class="browse-label">browse</label></br> Examiner 03 results.</p>
                                </form>
                            </div>
                        </div>
                    </div>
                    <br>
                    </form>
                
            </div>


        </div>
        <div class="temp2-footer">
            <style>
.footer-body {
    margin: 0;
    min-height: 100vh;
}

.footer {
    position: sticky;
    top: 100%;
    display: flex;
    flex-direction: column;
    width: 100%;
    height: 80px;
    /* padding: 34px 270px 33px 271px; */
    justify-content: center;
    align-items: center;

    border-radius: 8px 8px 0px 0px;
    background-color: #17376E;
    gap: 10px;
}

.footer-nilis {
    font-family: Poppins;
    font-size: 12px;
    font-weight: 400;
    color: #FFFFFF;
    text-align: center;
    line-height: 15px;
    /* 107.143% */
    letter-spacing: -0.28px;
}

.footer-address {
    color: #FFF;
    font-family: Poppins;
    font-size: 11px;
    font-style: normal;
    font-weight: 300;
    line-height: 15px;
    letter-spacing: -0.24px;
}
</style>

<body class="footer-body">
    <div class="footer">
        <div class="footer-nilis">Â© 2020, All rights reserved by National Institute of Library & Information Sciences
            (NILIS)</div>
        <div class="footer-address">Colombo, 0300300, Sri Lanka.</div>
    </div>
</body>        </div>



</body>
<script>
    // var examiner3 = true;
    // console.log('examiner 3 = ', examiner3);
    // var elements = document.querySelectorAll('.dashed-container-3');

    // // Loop each element and update the data-active attribute
    // elements.forEach(function (element) {
    //     element.dataset.active = examiner3;
    // });


    // Fetch data from the controller



    function handleDragOver(event) {
        event.preventDefault();
        var container = event.target;
        container.classList.add('drag-over');
    }

    function handleDragEnter(event) {
        event.preventDefault();
        var container = event.target;
        container.classList.add('drag-over');
    }

    function handleDragLeave(event) {
        var container = event.target;
        container.classList.remove('drag-over');
    }

    function handleDrop(event, containerId, fileInputId, formId, subCode, type) {
        event.preventDefault();

        // Remove the drag-over styles
        var container = document.getElementById(containerId);
        container.classList.remove('drag-over');

        // Handling the dropped files
        var fileInput = document.getElementById(fileInputId);
        var files = event.dataTransfer.files;

        // Validate each dropped file
        for (var i = 0; i < files.length; i++) {
            var file = files[i];
            if (file.type === 'text/csv' || file.name.toLowerCase().endsWith('.csv')) {
                // update the file input with the dropped files
                fileInput.files = files;

                // Show submit button
                showSubmitButton(containerId, fileInputId, formId, subCode, type);
            } else {
                // not a CSV file, you can provide feedback to the user
                alert('Please drop a CSV file.');
            }
        }
    }



    function showSubmitButton(containerId, fileInputId, formId, subCode, type) {
        var container = document.getElementById(containerId);
        var fileInput = document.getElementById(fileInputId);
        var form = document.getElementById(formId);

        if (!container || !fileInput || !form) {
            console.error('Container, fileInput, or form not found.');
            return;
        }

        // Check if a file is selected
        if (fileInput.files.length > 0) {

            // Check if the submit button is already present
            var existingDeleteButton = container.querySelector('.btn-secondary-cancel');
            if (!existingDeleteButton) {
                // Create a delete button dynamically
                var deleteButton = document.createElement('button');
                deleteButton.textContent = 'Delete';
                deleteButton.className = 'btn-secondary-cancel';
                deleteButton.name = 'sub1_exam-res';
                deleteButton.type = 'button';
                deleteButton.addEventListener('click', function () {
                    deleteFile(container, fileInput);
                });
            }
            var existingSubmitButton = container.querySelector('.btn-secondary');
            if (!existingSubmitButton) {
                // Create a submit button dynamically
                var submitButton = document.createElement('button');
                submitButton.textContent = 'Submit';
                submitButton.className = 'btn-secondary';
                submitButton.name = 'sub1_exam-res';
                submitButton.type = 'button';
                submitButton.id = 'button_' + formId;
                submitButton.addEventListener('click', function () {
                    uploadFile(fileInputId, submitButton.id, formId, subCode, type);
                });
            }

            // Wrap the file icon and file name in a container
            var fileInfoContainer = document.createElement('div');
            fileInfoContainer.className = 'file-info-container';

            //create container for buttons
            var buttonContainer = document.createElement('div');
            buttonContainer.className = 'button-container';

            // Hide the file icon label
            container.querySelector('.file-input-icon').style.display = 'none';

            //hide type labe
            container.querySelector('.marks-type').style.display = 'none';

            // Create the file icon
            var fileIcon = document.createElement('div');
            fileIcon.className = 'file-uploded-icon ';
            fileInfoContainer.appendChild(fileIcon);

            // Create the file name
            var fileName = document.createElement('span');
            fileName.textContent = fileInput.files[0].name;
            fileName.className = 'uploaded-file-name';
            fileInfoContainer.appendChild(fileName);

            // Append the container to the container
            form.appendChild(fileInfoContainer);

            // Append the buttonContainer to the form
            form.appendChild(buttonContainer);

            //add delete and submit button to container
            buttonContainer.appendChild(deleteButton);
            buttonContainer.appendChild(submitButton);
            // container.appendChild(buttonContainer);

            // Create the file icon image if not present
            var existingFileIcon = container.querySelector('.file-input-icon');
            if (!existingFileIcon) {
                var fileIcon = document.createElement('img');
                fileIcon.src = 'http://localhost/NILIS-MIS/public//assets/file-icon.png';
                fileIcon.className = 'file-input-icon';
                fileIcon.setAttribute('for', fileInputId);
                fileIcon.addEventListener('click', function () {
                    triggerFileInput(fileInputId);
                });
                container.appendChild(fileIcon);
            }
            // Hide the file input and associated text
            fileInput.style.display = 'none';
            container.querySelector('.text1').style.display = 'none';
        }
    }

    //function to trigger file input
    function triggerFileInput(fileInputId) {
        var fileInput = document.getElementById(fileInputId);
        fileInput.click();
    }

    function uploadFile(fileInputId, buttonId, formId, subCode, type) {

        var error = null;
        console.log('font end errrors =  ', error);

        if (error !== null && error !== '') {
            alert('Invalid Marks: ' + error);
            return;
        }

        var fileInput = document.getElementById(fileInputId);
        var formData = new FormData();
        console.log(fileInput.files[0])
        formData.append('file', fileInput.files[0]);
        formData.append('formId', formId);
        formData.append('subjectCode', subCode);
        formData.append('type', type);

        console.log('Form ID - ' + formId);
        console.log('Sub ID - ' + subCode);
        var targetURL = 'http://localhost/NILIS-MIS/public/sar/examination/resultsupload';

        fetch(targetURL, {
            method: 'POST',
            body: formData,
        })
            .then(response => {
                if (!response.ok) {
                    console.log('Res = '.response);
                    throw new Error('Network response was not ok');
                }
                return response.text();
            })
            .then(data => {
                console.log(data);
                alert('File uploaded successfully!');
                removeSubmitButton(buttonId);
            })
            .catch(error => {
                console.error('Error uploading file:', error);
                alert('Error uploading file. Please try again.');
            });
    }

    function removeSubmitButton(buttonID) {
        var button = document.getElementById(buttonID);
        if (button) {
            button.remove();
        }
    }

    //handle delete file
    function deleteFile(container, fileInput) {


        // Remove the delete and submit buttons
        container.querySelector('.btn-secondary-cancel').remove();


        // Remove the file info container
        container.querySelector('.file-info-container').remove();

        //Remove button container
        container.querySelector('.button-container').remove();

        // Display the file icon image and associated text
        container.querySelector('.file-input-icon').style.display = 'flex';

        //Display type label
        container.querySelector('.marks-type').style.display = 'block';


        // var fileIcon = document.createElement('img');
        // fileIcon.src = 'http://localhost/NILIS-MIS/public//assets/file-icon.png';
        // fileIcon.className = 'file-input-icon';
        // fileIcon.setAttribute('for', fileInput.id);
        // fileIcon.addEventListener('click', function () {
        //     triggerFileInput(fileInput.id);
        // });
        // container.appendChild(fileIcon);

        // Display the text
        container.querySelector('.text1').style.display = 'block';

        // Clear the selected file
        fileInput.value = '';
    }


    function downloadFile(subjectCode) {
        // Modify the file URL dynamically based on the subjectCode
        var fileUrl = 'http://localhost/NILIS-MIS/public/assets/csv/output/MarkSheet_' + subjectCode + '.csv';

        // Create an anchor element
        var a = document.createElement('a');
        a.href = fileUrl;

        // Set the download attribute with the desired file name
        a.download = 'MarkSheet_' + subjectCode + '.csv';

        // Append the anchor element to the document
        document.body.appendChild(a);

        // Trigger a click event on the anchor element
        a.click();

        // Remove the anchor element from the document
        document.body.removeChild(a);
    }

    console.log("before fetch");

    var targetURL = 'http://localhost/NILIS-MIS/public/sar/examination/resultsupload';
    // Fetch data from the controller
    fetch(targetURL)
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.text(); // Directly return text
        })
        .then(data => {
            console.log('data = ', data);
            // Update the view with the received data
            var examiner3 = data;

            var elements = document.querySelectorAll('.dashed-container-3');
            elements.forEach(function (element) {
                element.dataset.active = examiner3;
            });

        })
        .catch(error => {
            console.error('Error fetching data:', error);
        });


</script>

</html>